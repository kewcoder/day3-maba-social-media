{"version":3,"sources":["routes/Home.js","routes/Room.js","App.js","serviceWorker.js","index.js"],"names":["Home","props","useState","login","avatar","name","major","year","gender","setLogin","rooms","setRooms","socketRef","useRef","setAvatar","d","useEffect","current","io","connect","emit","on","data","localStorage","getItem","JSON","parse","className","onClick","id","uuid","history","push","map","room","key","code","roomID","max","joinRoom","length","alt","src","type","value","onChange","e","target","placeholder","setItem","stringify","StyledVideo","styled","video","Video","ref","peer","stream","srcObject","playsInline","autoPlay","Room","peers","setPeers","roomData","setRoomData","usersData","setUsersData","leaveUser","setLeaveUser","userVideo","peersRef","match","params","undefined","roomMax","roomName","roomCode","navigator","mediaDevices","getUserMedia","audio","then","joinData","user","console","log","users","forEach","userID","userToSignal","callerID","Peer","initiator","trickle","signal","createPeer","peerID","payload","incomingSignal","addPeer","find","p","muted","index","App","path","exact","component","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.be62fbf7.chunk.js","sourcesContent":["\nimport React, {  useRef,useEffect, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport { v1 as uuid } from \"uuid\";\n\nconst Home = (props) => {\n    \n\n    let [login, setLogin] = useState({\n        login: false,\n        avatar: '',\n        name: '',\n        major: '',\n        year: '',\n        gender: ''\n    });\n    const [rooms, setRooms] = useState([]);\n    \n    const socketRef = useRef();\n\n    useEffect(() => {\n      \n        socketRef.current = io.connect('/');\n\n        socketRef.current.emit(\"find room\");\n        socketRef.current.on(\"all rooms\", data => {\n            setRooms(data)\n        })\n        \n        if(localStorage.getItem(\"login\")){\n            setLogin(JSON.parse(localStorage.getItem(\"login\")))\n        }\n        \n    }, []);\n\n    function create() {\n        const id = uuid();\n        props.history.push(`/room/${id}/Room Name/${socketRef.current.id}/8`);\n    }\n\n    function joinRoom(room) {\n        props.history.push(`/room/${room.roomID}/${room.name}/${room.code}/${room.max}`);\n    }\n\n\n    function updateLogin(){\n\n        // cek if null\n        if(login.avatar === '' || login.name === '' || login.major === '' || login.year === '' || login.gender === ''){\n        \n            // Isi dulu Boss\n\n        }else{\n            setLogin({ ...login, login:true }) \n            localStorage.setItem('login',JSON.stringify({\n                avatar: login.avatar,\n                name: login.name,\n                major: login.major,\n                year: login.year,\n                gender: login.gender\n            }))\n        }\n       \n\n    }\n\n    function showRoom(){\n        return rooms.map(room => {\n            return <div className=\"item\" key={room.code} onClick={ () => joinRoom(room)}>\n                <h4>{ room.name }</h4>\n                <span>{ room.length } User | Room Code </span>\n                <span>{ room.code }</span>\n            </div>\n        })\n    }\n\n    function setAvatar(d){\n\n        setLogin({...login,avatar: d})\n\n\n    }\n\n    return (\n        <div className=\"main\">\n            { (login.login) ? \n                <>\n                    <div className=\"left\">\n                        <div className=\"content\">\n                            <h1>Maba. </h1>\n                            <div className=\"item\" >Kenalan Yuk !</div>\n                            <div className=\"item\">Masukkan Kode</div>\n\n                            <div className=\"item active\" onClick={create}>Buat Room</div>\n                            <div className=\"item\">Donasi</div>\n\n                        </div>\n                    </div>  \n                    <div className=\"right\">\n                        <div className=\"content\">\n                            {\n                                showRoom()\n                            }\n                        </div>\n                    </div>\n                </>\n\n            : <div className=\"right\">\n                <form id=\"login-form\" className=\"content\">\n                 <div className=\"item\">\n                     <label>Avatar</label>\n                     <img alt=\"avatar\" className={(login.avatar === '/avatar/1.png') ? 'img active' : 'img'}  src=\"./avatar/1.png\" onClick={ () => { setAvatar('/avatar/1.png')}}/>\n                     <img alt=\"avatar\" className={(login.avatar === '/avatar/2.png') ? 'img active' : 'img'}  src=\"./avatar/2.png\" onClick={ () => { setAvatar('/avatar/2.png')}}/>\n                     <img alt=\"avatar\" className={(login.avatar === '/avatar/3.png') ? 'img active' : 'img'}  src=\"./avatar/3.png\" onClick={ () => { setAvatar('/avatar/3.png')}}/>\n                     <img alt=\"avatar\" className={(login.avatar === '/avatar/4.png') ? 'img active' : 'img'}  src=\"./avatar/4.png\" onClick={ () => { setAvatar('/avatar/4.png')}}/>\n                     <img alt=\"avatar\" className={(login.avatar === '/avatar/5.png') ? 'img active' : 'img'}  src=\"./avatar/5.png\" onClick={ () => { setAvatar('/avatar/5.png')}}/>\n                     <img alt=\"avatar\" className={(login.avatar === '/avatar/6.png') ? 'img active' : 'img'}  src=\"./avatar/6.png\" onClick={ () => { setAvatar('/avatar/6.png')}}/>\n                 </div>\n                <input type=\"text\" className=\"item\" value={login.name} onChange={(e)=>{ setLogin({...login,name: e.target.value})}} placeholder=\"Name\" />\n                <select className=\"item\" value={login.major} onChange={(e)=>{ setLogin({...login,major: e.target.value})}} >\n                    <option value=\"\">\n                            Select Major\n                    </option>\n                    <option value=\"Informatika\">\n                            Informatika\n                    </option>\n                    <option value=\"Bahasa Inggris\">\n                            Bahasa Inggris\n                    </option>\n                </select>\n                <select className=\"item\" value={login.year} onChange={(e)=>{ setLogin({...login,year: e.target.value})}} >\n                    <option value=\"\">\n                            Select Student Year\n                    </option>\n                    <option value=\"2018\">\n                            Student Year 2018\n                    </option>\n                    <option value=\"2021\">\n                            Student Year 2021\n                    </option>\n                </select>\n                    <div className=\"item twogender\">\n                        <div className={(login.gender === 1) ? 'gender active' : 'gender'} onClick={()=>{ setLogin({...login,gender: 1})}} >\n                            Male\n                        </div>\n                        <div className={(login.gender === 2) ? 'gender active' : 'gender'} onClick={()=>{ setLogin({...login,gender: 2})}}>\n                            Female\n                        </div>\n                    </div>\n                <div className=\"item active\" onClick={updateLogin}>Login</div>\n                </form>\n            </div> \n            }\n            \n        </div>\n    );\n};\n\nexport default Home;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport styled from \"styled-components\";\n\n\n\nconst StyledVideo = styled.video`\n        width:0;\n        height:0;\n        background:black\n`;\n\nconst Video = (props) => {\n    const ref = useRef();\n\n    useEffect(() => {\n            props.peer.on(\"stream\", stream => {\n                ref.current.srcObject = stream;\n            })\n\n    }, [props]);\n\n        return (\n            <div>\n                <StyledVideo playsInline autoPlay ref={ref} />\n            </div>\n        );\n}\n\nconst Room = (props) => {\n    // const [joined, setJoined] = useState(false);\n\n    const [peers, setPeers] = useState([]);\n    const [roomData, setRoomData] = useState([]);\n    const [usersData, setUsersData] = useState([]);\n    const [leaveUser, setLeaveUser] = useState([]);\n\n    const socketRef = useRef();\n    const userVideo = useRef();\n    const peersRef = useRef([]);\n    const roomID = props.match.params.roomID;\n\n\n    useEffect(() => {    \n        const login = JSON.parse(localStorage.getItem('login'))\n\n       \n        if(login === null || login === undefined){\n                props.history.push(`/`);\n        }else{\n            \n\n            const roomMax = props.match.params.max;\n            const roomName = props.match.params.name;\n            const roomCode = props.match.params.code;\n            \n\n\n         \n        \n            socketRef.current = io.connect('/');\n\n            \n            navigator.mediaDevices.getUserMedia({ video: false, audio: true }).then(stream => {\n                userVideo.current.srcObject = stream;\n                \n                let joinData = {\n                    max: roomMax,\n                    name: roomName,\n                    code: roomCode,\n                    roomID: roomID,\n                    user: {...login, id:socketRef.current.id }\n                }\n\n                socketRef.current.emit(\"join room\", joinData);\n\n                socketRef.current.on(\"room data\", data => {\n                    console.log(data)\n                    setRoomData(data.roomData[0])\n                    setUsersData(data.usersData)\n                })\n\n                socketRef.current.on(\"user leave\", data => {\n                    // console.log(data+\" leave\")\n                    leaveUser.push(data)\n                    setLeaveUser(leaveUser)\n                })\n\n                socketRef.current.on(\"all users\", users => {\n                \n                    const peers = [];\n                    users.forEach(userID => {\n                        const peer = createPeer(userID, socketRef.current.id, stream);\n                        peersRef.current.push({\n                            peerID: userID,\n                            peer,\n                        })\n                        \n                        peers.push(peer);\n\n\n                    })\n\n                    setPeers(peers);\n\n\n                })\n\n                socketRef.current.on(\"user joined\", payload => {\n                    \n            \n                    const peer = addPeer(payload.signal, payload.callerID, stream);\n\n                    peersRef.current.push({\n                        peerID: payload.callerID,\n                        peer,\n                    })\n\n                    setPeers(users => [...users, peer]);\n                });\n\n                socketRef.current.on(\"receiving returned signal\", payload => {\n                    const item = peersRef.current.find(p => p.peerID === payload.id);\n                    item.peer.signal(payload.signal);\n                });\n\n            })\n\n\n        \n        }\n        \n    }, [roomID,props,leaveUser]);\n\n    function createPeer(userToSignal, callerID, stream) {\n        const peer = new Peer({\n            initiator: true,\n            trickle: false,\n            stream,\n        });\n\n        peer.on(\"signal\", signal => {\n            socketRef.current.emit(\"sending signal\", { userToSignal, callerID, signal })\n        })\n\n        return peer;\n    }\n\n    function addPeer(incomingSignal, callerID, stream) {\n        const peer = new Peer({\n            initiator: false,\n            trickle: false,\n            stream,\n        })\n\n        peer.on(\"signal\", signal => {\n            socketRef.current.emit(\"returning signal\", { signal, callerID })\n        })\n\n        peer.signal(incomingSignal);\n\n        return peer;\n    }\n\n    function showUsers(){\n            return usersData.map(d => {\n                return (\n                    <div key={d.id} className=\"item-user\" >\n                        <img src={d.avatar} alt=\"avatar\" />\n                        <span className=\"name\"> { d.name } </span>\n                    </div>\n                )\n            })\n        \n    }\n\n    return (\n        <div className=\"main\">\n\n               <StyledVideo muted ref={userVideo} autoPlay playsInline />\n                {peers.map((peer, index) => {\n                    return (\n                        <Video key={index} peer={peer} />\n                    );\n                })}\n                \n\n           \n           <div className=\"left\">\n                <div className=\"content\">\n                {showUsers()}\n                </div>\n           </div>\n           <div className=\"right\">\n               <div className=\"content\">\n                    <div className=\"item\">\n                        Room Name :{ roomData.name }\n                    </div>\n                    <div className=\"item\">\n                        Room Code :{ roomData.code }\n                    </div>\n                    <div className=\"item\">\n                        Users : { roomData.length } joined\n                    </div>\n               </div>\n           </div>\n        </div>\n    );\n};\n\nexport default Room;\n","import React from 'react';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport Home from \"./routes/Home\";\nimport Room from \"./routes/Room\";\n\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Switch>\n        <Route path=\"/\" exact component={Home} />\n        <Route path=\"/room/:roomID/:name/:code/:max\" component={Room} />\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\nserviceWorker.register();"],"sourceRoot":""}