(this.webpackJsonpmaba=this.webpackJsonpmaba||[]).push([[0],{121:function(e,a){},123:function(e,a){},134:function(e,a,t){"use strict";t.r(a);var n,r=t(0),c=t.n(r),o=t(62),i=t.n(o),l=(t(75),t(68)),m=t(1),s=t(3),u=t(8),v=t(26),g=t.n(v),d=t(136),f=function(e){var a=Object(r.useState)({login:!1,avatar:"",name:"",major:"",year:"",gender:""}),t=Object(u.a)(a,2),n=t[0],o=t[1],i=Object(r.useState)([]),l=Object(u.a)(i,2),m=l[0],v=l[1],f=Object(r.useRef)();function p(e){o(Object(s.a)(Object(s.a)({},n),{},{avatar:e}))}return Object(r.useEffect)((function(){f.current=g.a.connect("/"),f.current.emit("find room"),f.current.on("all rooms",(function(e){v(e)})),localStorage.getItem("login")&&o(JSON.parse(localStorage.getItem("login")))}),[]),c.a.createElement("div",{className:"main"},n.login?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"content"},c.a.createElement("h1",null,"Maba. "),c.a.createElement("div",{className:"item"},"Kenalan Yuk !"),c.a.createElement("div",{className:"item active",onClick:function(){var a=Object(d.a)();e.history.push("/room/".concat(a,"/Room Name/").concat(f.current.id,"/3000"))}},"Buat Room"),c.a.createElement("div",{className:"item"},"Donasi"),c.a.createElement("div",{className:"item"},"Back to Home"))),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"content"},m.map((function(a){return c.a.createElement("div",{className:"item",key:a.code,onClick:function(){return function(a){e.history.push("/room/".concat(a.roomID,"/").concat(a.name,"/").concat(a.code,"/").concat(a.max))}(a)}},c.a.createElement("h4",null,a.name),c.a.createElement("span",null,a.length," User | Room Code "),c.a.createElement("span",null,a.code))}))))):c.a.createElement("div",{className:"right"},c.a.createElement("form",{id:"login-form",className:"content"},c.a.createElement("div",{className:"item"},c.a.createElement("label",null,"Avatar"),c.a.createElement("img",{alt:"avatar",className:"/avatar/1.png"===n.avatar?"img active":"img",src:"./avatar/1.png",onClick:function(){p("/avatar/1.png")}}),c.a.createElement("img",{alt:"avatar",className:"/avatar/2.png"===n.avatar?"img active":"img",src:"./avatar/2.png",onClick:function(){p("/avatar/2.png")}}),c.a.createElement("img",{alt:"avatar",className:"/avatar/3.png"===n.avatar?"img active":"img",src:"./avatar/3.png",onClick:function(){p("/avatar/3.png")}}),c.a.createElement("img",{alt:"avatar",className:"/avatar/4.png"===n.avatar?"img active":"img",src:"./avatar/4.png",onClick:function(){p("/avatar/4.png")}}),c.a.createElement("img",{alt:"avatar",className:"/avatar/5.png"===n.avatar?"img active":"img",src:"./avatar/5.png",onClick:function(){p("/avatar/5.png")}}),c.a.createElement("img",{alt:"avatar",className:"/avatar/6.png"===n.avatar?"img active":"img",src:"./avatar/6.png",onClick:function(){p("/avatar/6.png")}})),c.a.createElement("input",{type:"text",className:"item",value:n.name,onChange:function(e){o(Object(s.a)(Object(s.a)({},n),{},{name:e.target.value}))},placeholder:"Name"}),c.a.createElement("select",{className:"item",value:n.major,onChange:function(e){o(Object(s.a)(Object(s.a)({},n),{},{major:e.target.value}))}},c.a.createElement("option",{value:""},"Select Major"),c.a.createElement("option",{value:"Informatika"},"Informatika"),c.a.createElement("option",{value:"Bahasa Inggris"},"Bahasa Inggris")),c.a.createElement("select",{className:"item",value:n.year,onChange:function(e){o(Object(s.a)(Object(s.a)({},n),{},{year:e.target.value}))}},c.a.createElement("option",{value:""},"Select Student Year"),c.a.createElement("option",{value:"2018"},"Student Year 2018"),c.a.createElement("option",{value:"2021"},"Student Year 2021")),c.a.createElement("div",{className:"item twogender"},c.a.createElement("div",{className:1===n.gender?"gender active":"gender",onClick:function(){o(Object(s.a)(Object(s.a)({},n),{},{gender:1}))}},"Male"),c.a.createElement("div",{className:2===n.gender?"gender active":"gender",onClick:function(){o(Object(s.a)(Object(s.a)({},n),{},{gender:2}))}},"Female")),c.a.createElement("div",{className:"item active",onClick:function(){""===n.avatar||""===n.name||""===n.major||""===n.year||""===n.gender||(o(Object(s.a)(Object(s.a)({},n),{},{login:!0})),localStorage.setItem("login",JSON.stringify({avatar:n.avatar,name:n.name,major:n.major,year:n.year,gender:n.gender})))}},"Login"))))},p=t(69),E=t(63),h=t(34),b=t.n(h),j=t(64).a.video(n||(n=Object(E.a)(["\n        width:0;\n        height:0;\n        background:black\n"]))),N=function(e){var a=Object(r.useRef)();return Object(r.useEffect)((function(){e.peer.on("stream",(function(e){a.current.srcObject=e}))}),[e]),c.a.createElement("div",null,c.a.createElement(j,{playsInline:!0,autoPlay:!0,ref:a}))},O=function(e){var a=Object(r.useState)([]),t=Object(u.a)(a,2),n=t[0],o=t[1],i=Object(r.useState)([]),l=Object(u.a)(i,2),m=l[0],v=l[1],d=Object(r.useState)([]),f=Object(u.a)(d,2),E=f[0],h=f[1],O=Object(r.useState)([]),k=Object(u.a)(O,2),w=k[0],y=k[1],S=Object(r.useState)(!1),I=Object(u.a)(S,2),C=I[0],D=I[1],R=Object(r.useRef)(),x=Object(r.useRef)(),W=Object(r.useRef)([]),M=e.match.params.roomID;return Object(r.useEffect)((function(){var a=JSON.parse(localStorage.getItem("login"));if(null===a||void 0===a)e.history.push("/");else{var t=e.match.params.max,n=e.match.params.name,r=e.match.params.code;R.current=g.a.connect("/"),navigator.mediaDevices.getUserMedia({video:!1,audio:!0}).then((function(e){x.current.srcObject=e;var c={max:t,name:n,code:r,roomID:M,user:Object(s.a)(Object(s.a)({},a),{},{id:R.current.id,mute:C})};R.current.emit("join room",c),R.current.on("room data",(function(e){console.log(e),v(e.roomData[0]),h(e.usersData)})),R.current.on("user leave",(function(e){w.push(e),y(w)})),R.current.on("all users",(function(a){var t=[];a.forEach((function(a){var n=function(e,a,t){var n=new b.a({initiator:!0,trickle:!1,stream:t});return n.on("signal",(function(t){R.current.emit("sending signal",{userToSignal:e,callerID:a,signal:t})})),n}(a,R.current.id,e);W.current.push({peerID:a,peer:n}),t.push(n)})),o(t)})),R.current.on("user joined",(function(a){var t=function(e,a,t){var n=new b.a({initiator:!1,trickle:!1,stream:t});return n.on("signal",(function(e){R.current.emit("returning signal",{signal:e,callerID:a})})),n.signal(e),n}(a.signal,a.callerID,e);W.current.push({peerID:a.callerID,peer:t}),o((function(e){return[].concat(Object(p.a)(e),[t])}))})),R.current.on("receiving returned signal",(function(e){W.current.find((function(a){return a.peerID===e.id})).peer.signal(e.signal)}))}))}}),[M,e,w,C]),c.a.createElement("div",{className:"main"},c.a.createElement(j,{muted:!0,ref:x,autoPlay:!0,playsInline:!0}),n.map((function(e,a){return c.a.createElement(N,{key:a,peer:e})})),c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"content"},c.a.createElement("h1",null,"Maba. "),c.a.createElement("br",null),function(){var e=E.filter((function(e){var a=w.includes(e.id);return a?e.id!==a:e}));return console.log(e),console.log(w),e.map((function(e){return c.a.createElement("div",{key:e.id,className:"item-user"},c.a.createElement("img",{src:e.avatar,alt:"avatar"}),c.a.createElement("span",{className:"name"}," ",e.name," "))}))}())),c.a.createElement("div",{className:"right"},c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"item"},"Room Name :",m.name),c.a.createElement("div",{className:"item"},"Room Code :",m.code),c.a.createElement("div",{className:"item"},"Users : ",m.length," joined"),c.a.createElement("div",{className:"item twogender"},c.a.createElement("div",{className:C?"gender active":"gender",onClick:function(){D(!C)}},"Mute"),c.a.createElement("div",{className:"gender"},"leave")))))};var k=function(){return c.a.createElement(l.a,null,c.a.createElement(m.c,null,c.a.createElement(m.a,{path:"/",exact:!0,component:f}),c.a.createElement(m.a,{path:"/room/:roomID/:name/:code/:max",component:O})))},w=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function y(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("","/service-worker.js");w?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):y(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):y(a,e)}))}}()},70:function(e,a,t){e.exports=t(134)},75:function(e,a,t){},98:function(e,a){}},[[70,1,2]]]);
//# sourceMappingURL=main.f9b3054a.chunk.js.map